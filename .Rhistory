library(eqv)
filename <- system.file("extdata/signif.txt", package = "eqv")
data <- readr::read_delim(filename, delim = "\t")
library(testthat)
test_that("eq_clean_data returns data frame", {
expect_is(eq_clean_data(data), "data.frame")
})
expect_is(eq_clean_data(data)$DATE, "Date")
test_that("eq_clean_data$DATE is Date type", {
expect_is(eq_clean_data(data)$DATE, "Date")
})
test_that("eq_clean_data$DATE is Date type", {
expect_is(eq_clean_data(data)$DATE, "Chr")
})
test_that("eq_clean_data$DATE is Date type", {
expect_is(eq_clean_data(data)$DATE, "Date")
})
est_that("geom_timeline_label returns ggplot object", {
g <- data %>% eq_clean_data() %>%
dplyr::filter(COUNTRY %in% c("GREECE", "ITALY"), YEAR > 2000) %>%
ggplot2::ggplot(ggplot2::aes(x = DATE,
y = COUNTRY,
color = as.numeric(TOTAL_DEATHS),
size = as.numeric(EQ_PRIMARY)
)) +
geom_timeline_label(aes(label = LOCATION_NAME))
expect_is(g, "ggplot")
})
test_that("geom_timeline_label returns ggplot object", {
g <- data %>% eq_clean_data() %>%
dplyr::filter(COUNTRY %in% c("GREECE", "ITALY"), YEAR > 2000) %>%
ggplot2::ggplot(ggplot2::aes(x = DATE,
y = COUNTRY,
color = as.numeric(TOTAL_DEATHS),
size = as.numeric(EQ_PRIMARY)
)) +
geom_timeline_label(aes(label = LOCATION_NAME))
expect_is(g, "ggplot")
})
library(eqv)
eq_clean_data
library(ggplot2)
test_that("theme_timeline returns ggplot object", {
g <- data %>% eq_clean_data() %>%
dplyr::filter(COUNTRY %in% c("GREECE", "ITALY"), YEAR > 2000) %>%
ggplot2::ggplot(ggplot2::aes(x = DATE,
y = COUNTRY,
color = as.numeric(TOTAL_DEATHS),
size = as.numeric(EQ_PRIMARY)
)) +
theme_timeline()
expect_is(g, "ggplot")
})
devtools::document()
load_all()
devtools::check()
library(eqv)
eq_location_clean
devtools::document()
load_all()
library(eqv)
library(devtools)
devtools::check()
library(eqv)
library(testthat)
test_that("eq_location_clean returns a data frame", {
expect_is(eq_location_clean(data), "data.frame")
})
data <- readr::read_delim(filename, delim = "\t")
head(data)
str(data)
devtools::document()
load_all()
devtools::check()
eq_location_clean <- function(data) {
data <- data %>%
dplyr::mutate_(LOCATION_NAME = ~LOCATION_NAME %>%
stringr::str_replace(paste0(COUNTRY, ":"), "") %>%
stringr::str_trim("both") %>%
stringr::str_to_title())
data
}
filename <- system.file("extdata/signif.txt", package = "eqv")
data <- readr::read_delim(filename, delim = "\t")
head(data)
tt<- data %>%
eq_clean_data()
str(tt)
tt<- data %>%
eq_clean_data() %>%
eq_location_clean()
str(tt)
library(eqv)
devtools::check()
load_all()
devtools::document()
load_all()
library(eqv)
devtools::check()
devtools::document()
load_all()
library(eqv)
devtools::check()
devtools::document()
library(eqv)
devtools::check()
devtools::document()
devtools::check()
library(eqv)
devtools::document()
devtools::check()
library(eqv)
